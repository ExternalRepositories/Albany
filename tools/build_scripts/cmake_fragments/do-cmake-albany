#! /bin/bash -xe

/bin/rm -f CMakeCache.txt

SOURCE_DIR=${ALBDIR:-..}

cmake \
    -D ALBANY_TRILINOS_DIR:FILEPATH=${TRILINSTALLDIR:?TRILINSTALLDIR must be set} \
    -D CMAKE_BUILD_TYPE:STRING=$ALBANY_BUILD_MODE \
    -D CMAKE_VERBOSE_MAKEFILE:BOOL=${ALBANY_VERBOSE_MAKEFILE:-OFF} \
    -D ALBANY_CXX_FLAGS:STRING="$ALBANY_CXX_FLAGS" \
    -D ENABLE_LCM:BOOL=${ALBANY_LCM:-OFF} \
    -D ENABLE_SG_MP:BOOL=${ALBANY_SG_MP:-OFF} \
    -D ENABLE_MOR:BOOL=${ALBANY_MOR:-OFF} \
    -D ENABLE_FELIX:BOOL=${ALBANY_FELIX:-OFF} \
    -D ENABLE_HYDRIDE:BOOL=${ALBANY_HYDRIDE:-OFF} \
    -D ENABLE_SEE:BOOL=${ALBANY_SEE:-OFF} \
    -D ENABLE_AMP:BOOL=${ALBANY_AMP:-OFF} \
    -D ENABLE_ATO:BOOL=${ALBANY_ATO:-OFF} \
    -D ENABLE_SCOREC:BOOL=${ALBANY_SCOREC:-OFF} \
    -D ENABLE_QCAD:BOOL=${ALBANY_QCAD:-OFF} \
    -D ENABLE_ASCR:BOOL=${ALBANY_ASCR:-OFF} \
    -D ENABLE_AERAS:BOOL=${ALBANY_AERAS:-OFF} \
    -D ENABLE_64BIT_INT:BOOL=${ALBANY_64BIT_INT:-OFF} \
    -D ENABLE_LAME:BOOL=${ALBANY_LAME:-OFF} \
    -D LAME_INCLUDE_DIR:FILEPATH=$LAMEDIR/include \
    -D LAME_LIBRARY_DIR:FILEPATH=$LAMELIBDIR/lib \
    -D ENABLE_DEMO_PDES:BOOL=${ALBANY_DEMO_PDES:-OFF} \
    -D ENABLE_MPAS_INTERFACE:BOOL=${ALBANY_MPAS_INTERFACE:-OFF} \
    -D ENABLE_CISM_INTERFACE:BOOL=${ALBANY_CISM_INTERFACE:-OFF} \
    -D CISM_INCLUDE_DIR:FILEPATH=$CISMDIR/libdycore \
    $SOURCE_DIR
