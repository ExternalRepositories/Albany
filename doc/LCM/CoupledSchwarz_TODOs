
-----------------------Cleanup TODOs---------------------------

4.) Change variable/function names to comply with C++ coding standards
[Alejandro] Mostly done in SchwarzMultiscale.*.

5.) Further down the line, we'll want to clean up the input files to
remove stuff that's not read in (e.g., the coupled one won't have a
discretization section probably) [TBD -- I suggest we hold off on this
for now until we decide definitively what'll be read in from what
file.].

6.) Eventually we'll want to put an ifdef to suppress all the debug
output [TBD].


---------------------Debug TODOs------------------------

1.) Debug evalModelImpl in LCM::SchwarzMultiScale class on 1 domain
with LOCA (NOX works) (why is ||F|| not changing?) [Irina]

2.) Add check so that it's possible to run problem where Number of parameters in coupled 
input file \neq Number of parameters in individual files (and same for responses / sensitivities). 
[Irina]

3.) Fix memory leak issues that show up after solve.

4.) Is Ifpack2 supposed to work as preconditioner for Thyra block operator?  The following 
exception is thrown 

p=0: *** Caught standard std::exception of type 'std::logic_error' :

 /home/ikalash/Trilinos_Albany/nightlyAlbanyTests/Results2/Trilinos/build/install/lib/cmake/Trilinos/../../../include/Thyra_Ifpack2PreconditionerFactory_def.hpp:122:

 Throw number = 2

 Throw test that evaluated to true: !(this->isCompatible(*fwdOpSrc))

5.) Implement thyra product vector / space versions of responses / parameters / sensitivities. [Irina]




---------------------Development TODOs------------------------

1.) We may want to put in validatian of parameter lists in
LCM::SchwarzMultiscale class, if necessary.  It appears to be handled
in general already in other parts of the code. [TBD?]

2.) Implement Schwarz_BoundaryJacobian class to create / apply boundary 
Jacobians as Tpetra_Operators.  Resulting Teuchos Array of Tpetra_Operators
will be passed to Schwarz_CoupledJacobian class. [Alejandro]

3.) Implement separateCoupledVector for the general (> 1) domain case [Irina]


------------------Questions/Comments/Notes-----------------------------

1.) create_W_prec() is not implemented in Thyra.  This means we will
not have a preconditioner at the beginning.

2.) get_W_factory() is not needed -- just returns null.

4.) initial_guess, passed to the LCM::CoupledSchwarz constructor, is
used to create the Albany_Application object for each model.  There,
it's used to set the initial condition (AAdapt:InitialContitionsT).
It's used to set x_init and x_dot_init, part of nominal_values
(get_x_init and get_x_dot_init for the EpetraExt Model Evaluator).

----------------Development Planning TODOs----------------------------------------


2.) Understand how the output will be done.  In
QCAD::CoupledPoissonSchrodinger, a discretization object is created
just for producing the collected output.  Need to understand how this
works and how to extend it to our case.  A related question is whether
we need to create an observer.  We would need a routine that breaks up
the final concatenated solutions into separate ones and gives these to
the mesh output routines (like separateCombinedVector in QCAD?).

3.) Figure out how we'll hook in Teko for the preconditioner.

4.) Figure out if Thyra can be used for efficient matrix/vector
multiplies and getting submatrices/vectors for coupled model.  Is
Tpetra_Operator Jacobian class OK, or should this be Thyra?

-----------------Notes from emails with Andy---------------------------------------

1.) The CouplePS_NOXObserver takes a single vector for the fully
coupled problem and breaks it into separate vectors for output. The
single vector has sizes like 4N+3 for for potential and 3 eigenvectos,
and it sends the 5 separate N vectors to exodus using the eigenvalues
as time stamps.

2.) For all Thyra problems, and almost all EpetraExt problems, there
is no Wprec.  Then the preconditioner is built within Stratimikos
based on the parameter list entries for Ifpack{2} or ML/MueLu. All of
these internal preconditioners require that W is a RowMatrix (parent
abstract class of CRS matrix). If W is just an operator, we can't do
any internal preconditioning and problems must be run without a
preconditioner or with Wprec implemented.

3.) The Teko interface in Albany was done very quickly when Teko was
new. My understanding is that it has evolved since then, and the
Albany implementation is not something we should look to or build on.
It is now accessible through Stratimikos and we should figure out how
to call it that way.

4.) Thyra should have clean ways to construct a single vector from
views of others, and a matrix from views of sub-matrices. This will
make everything much cleaner if we can figure out the syntax.  Talk to
Roger Pawlowski, Roscoe Bartless, Eric Cyr.
