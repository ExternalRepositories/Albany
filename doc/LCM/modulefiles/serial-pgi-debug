#%Module 1.0
#
#  Environment for compiling and running Albany/LCM.
#
set     arch            serial
set     tool_chain      pgi
set     build_type      debug
set     build           $arch-$tool_chain-$build_type
set     lcm_dir         $env(LCM_DIR)
set     module_dir      $env(MODULEPATH)
set     install_dir     $lcm_dir/trilinos-install-$build
set     alb_exe_dir     $lcm_dir/albany-build-$build/src

set     pgihome         /opt/pgi
set     target          linux86-64
set     version         16.5
set     pgidir          $pgihome/$target/$version

setenv                  ARCH            $arch
setenv                  TOOL_CHAIN      $tool_chain
setenv                  BUILD_TYPE      $build_type
setenv                  BUILD           $build
setenv                  INSTALL_DIR     $install_dir

setenv                  PGI             $pgihome
setenv                  CC              $pgidir/bin/pgcc
setenv                  FC              $pgidir/bin/pgfortran
setenv                  F90             $pgidir/bin/pgf90
setenv                  F77             $pgidir/bin/pgf77
setenv                  CPP             "$pgidir/bin/pgcc -Mcpp"
setenv                  CXX             $pgidir/bin/pgc++

prepend-path            LD_LIBRARY_PATH $install_dir/lib
prepend-path            LD_LIBRARY_PATH /usr/lib64/openmpi/lib
prepend-path            LD_LIBRARY_PATH /usr/local/netcdf/lib
prepend-path            LD_LIBRARY_PATH $pgidir/lib
prepend-path            PATH            $alb_exe_dir
prepend-path            PATH            $alb_exe_dir/LCM
prepend-path            PATH            $install_dir/bin
prepend-path            PATH            /usr/lib64/openmpi/bin
prepend-path            PATH            $pgidir/bin
prepend-path            PYTHONPATH      $install_dir/lib
conflict                $module_dir
conflict                pgi